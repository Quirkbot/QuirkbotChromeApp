var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){var i=l.call(arguments,0);return typeof i[0]!="string"&&i.length===1&&i.push(null),n.apply(e,i.concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),define("happy/app/BaseApp",[],function(){var e=function(){var e=this,t=function(){};e.container=document.body,e.setup=t,e.update=t,e.draw=t,e.onKeyUp=t,e.onKeyDown=t,e.onMouseOver=t,e.onMouseOut=t,e.onMouseDown=t,e.onMouseUp=t,e.onMouseMove=t,e.onClick=t,e.onDoubleClick=t,e.onResize=t,e.onReposition=t};return e}),function(){var e=function(e){var t=this,n={},r=function(t){var n=function(){var n=Array.prototype.slice.call(arguments,0),r=new Promise(function(r,i){var s={name:t,arguments:n},o=chrome.runtime.connect(e);console.log(s,o,e),o.onMessage.addListener(function(e){o.disconnect();if(e.error)i(e.error);else{var t=[];Object.keys(e.arguments).forEach(function(n){t.push(e.arguments[n])}),r.apply(this,t)}}),o.postMessage(s)});return r};return n};Object.defineProperty(t,"generateCall",{value:r})};typeof define!="undefined"?define("ChromeExtensionAPIClient",[],function(){return e}):typeof exports!="undefined"?exports.ChromeExtensionAPIClient=e:window.ChromeExtensionAPIClient=e}(),define("Serial",["ChromeExtensionAPIClient"],function(e){var t=function(){var t=this,n,r=function(){var t=new e("lgjmgejpijgfefnfbkdjoepoebaeafin"),n=t.generateCall("getDevices"),r=t.generateCall("connect"),i=t.generateCall("update"),s=t.generateCall("disconnect"),o=t.generateCall("setPaused"),u=t.generateCall("getInfo"),a=t.generateCall("getConnections"),f=t.generateCall("send"),l=t.generateCall("flush"),c=t.generateCall("getControlSignals"),h=t.generateCall("setControlSignals");n().then(function(e){console.log(e)})};r()},n=new t;return n}),define("App",["happy/app/BaseApp","Serial"],function(e,t){var n=function(){var e=this;e.setup=function(){}};return n.prototype=new e,n}),define("happy/utils/DOM",[],function(){var e=function(){var e=this,t=function(e,t){return typeof e.classList=="undefined"?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):e.classList.contains(t)},n=function(e,t){typeof e.classList=="undefined"?this.hasClass(e,t)||(e.className+=" "+t):e.classList.add(t)},r=function(e,n){if(typeof e.classList=="undefined"){if(t(e,n)){var r=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(r," ")}}else e.classList.remove(n)},i=function(e){while(e.lastChild)e.removeChild(e.lastChild)},s=function(e){var t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},o=function(e){var t=0,n=0;if(e&&e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{x:t,y:n}};Object.defineProperty(e,"hasClass",{value:t}),Object.defineProperty(e,"addClass",{value:n}),Object.defineProperty(e,"removeClass",{value:r}),Object.defineProperty(e,"empty",{value:i}),Object.defineProperty(e,"measure",{value:s}),Object.defineProperty(e,"calculatePosition",{value:o})};return e}),define("happy/polyfill/console",[],function(){return window.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}}}),define("happy/_libs/mout/array/forEach",[],function(){function e(e,t,n){if(e==null)return;var r=-1,i=e.length;while(++r<i)if(t.call(n,e[r],r,e)===!1)break}return e}),define("happy/_libs/mout/array/indexOf",[],function(){function e(e,t,n){n=n||0;if(e==null)return-1;var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t)return i;i++}return-1}return e}),define("happy/_libs/mout/array/combine",["./indexOf"],function(e){function t(t,n){if(n==null)return t;var r=-1,i=n.length;while(++r<i)e(t,n[r])===-1&&t.push(n[r]);return t}return t}),define("happy/_libs/mout/lang/toString",[],function(){function e(e){return e==null?"":e.toString()}return e}),define("happy/_libs/mout/string/replaceAccents",["../lang/toString"],function(e){function t(t){return t=e(t),t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}return t}),define("happy/_libs/mout/string/removeNonWord",["../lang/toString"],function(e){function t(t){return t=e(t),t.replace(/[^0-9a-zA-Z\xC0-\xFF \-_]/g,"")}return t}),define("happy/_libs/mout/string/upperCase",["../lang/toString"],function(e){function t(t){return t=e(t),t.toUpperCase()}return t}),define("happy/_libs/mout/string/lowerCase",["../lang/toString"],function(e){function t(t){return t=e(t),t.toLowerCase()}return t}),define("happy/_libs/mout/string/camelCase",["../lang/toString","./replaceAccents","./removeNonWord","./upperCase","./lowerCase"],function(e,t,n,r,i){function s(s){return s=e(s),s=t(s),s=n(s).replace(/[\-_]/g," ").replace(/\s[a-z]/g,r).replace(/\s+/g,"").replace(/^[A-Z]/g,i),s}return s}),define("happy/_libs/mout/string/pascalCase",["../lang/toString","./camelCase","./upperCase"],function(e,t,n){function r(r){return r=e(r),t(r).replace(/^[a-z]/,n)}return r}),define("happy/utils/Vendor",["../polyfill/console","../_libs/mout/array/forEach","../_libs/mout/array/combine","../_libs/mout/string/pascalCase"],function(e,t,n,r){var i=["WebKit","Moz","O","Ms"],s=[],o=[];t(i,function(e){s.push(r(e)),o.push(e.toLowerCase())});var u=n(s,o),a=function(){var t=this,n=function(t,n){if(!t)return;var i=r(t);n=n||window;var s=t,o=n[s];if(typeof o=="undefined")for(var a=0;a<u.length;a++){s=u[a]+i,o=n[s];if(typeof o!="undefined")break}if(typeof o=="undefined"){e.log(t+" is not implemented.");return}return{name:s,context:n}},i=function(e,t){var r=n(e,t);if(!r)return;return function(){r.context[r.name].apply(r.context,arguments)}},s=function(e,t){var r=n(e,t);if(!r)return;return r.context[r.name]},o=function(e,t){var r=n(e,t);if(!r)return;return r.name};Object.defineProperty(t,"validateMethod",{value:i}),Object.defineProperty(t,"validateConstructor",{value:s}),Object.defineProperty(t,"validateName",{value:o})};return a}),define("happy/_libs/mout/object/hasOwn",[],function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return e}),define("happy/_libs/mout/lang/kindOf",[],function(){function r(r){return r===null?"Null":r===n?"Undefined":e.exec(t.call(r))[1]}var e=/^\[object (.*)\]$/,t=Object.prototype.toString,n;return r}),define("happy/_libs/mout/lang/isPlainObject",[],function(){function e(e){return!!e&&typeof e=="object"&&e.constructor===Object}return e}),define("happy/_libs/mout/object/forIn",[],function(){function n(){t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=!0;for(var n in{toString:null})e=!1}function r(r,s,o){var u,a=0;e==null&&n();for(u in r)if(i(s,r,u,o)===!1)break;if(e)while(u=t[a++])if(r[u]!==Object.prototype[u]&&i(s,r,u,o)===!1)break}function i(e,t,n,r){return e.call(r,t[n],n,t)}var e,t;return r}),define("happy/_libs/mout/object/forOwn",["./hasOwn","./forIn"],function(e,t){function n(n,r,i){t(n,function(t,s){if(e(n,s))return r.call(i,n[s],s,n)})}return n}),define("happy/_libs/mout/object/mixIn",["./forOwn"],function(e){function t(t,r){var i=0,s=arguments.length,o;while(++i<s)o=arguments[i],o!=null&&e(o,n,t);return t}function n(e,t){this[t]=e}return t}),define("happy/_libs/mout/lang/clone",["./kindOf","./isPlainObject","../object/mixIn"],function(e,t,n){function r(t){switch(e(t)){case"Object":return i(t);case"Array":return u(t);case"RegExp":return s(t);case"Date":return o(t);default:return t}}function i(e){return t(e)?n({},e):e}function s(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignorecase?"i":"",new RegExp(e.source,t)}function o(e){return new Date(+e)}function u(e){return e.slice()}return r}),define("happy/_libs/mout/lang/deepClone",["./clone","../object/forOwn","./kindOf","./isPlainObject"],function(e,t,n,r){function i(t,r){switch(n(t)){case"Object":return s(t,r);case"Array":return o(t,r);default:return e(t)}}function s(e,n){if(r(e)){var s={};return t(e,function(e,t){this[t]=i(e,n)},s),s}return n?n(e):e}function o(e,t){var n=[],r=-1,s=e.length,o;while(++r<s)n[r]=i(e[r],t);return n}return i}),define("happy/_libs/mout/lang/isKind",["./kindOf"],function(e){function t(t,n){return e(t)===n}return t}),define("happy/_libs/mout/lang/isObject",["./isKind"],function(e){function t(t){return e(t,"Object")}return t}),define("happy/_libs/mout/object/merge",["./hasOwn","../lang/deepClone","../lang/isObject"],function(e,t,n){function r(){var i=1,s,o,u,a;a=t(arguments[0]);while(u=arguments[i++])for(s in u){if(!e(u,s))continue;o=u[s],n(o)&&n(a[s])?a[s]=r(a[s],o):a[s]=t(o)}return a}return r}),define("happy/app/Runner",["../utils/DOM","../utils/Vendor","../_libs/mout/object/merge"],function(e,t,n){var r=new t,i=new e,s=r.validateMethod("requestAnimationFrame"),o=r.validateConstructor("MutationObserver"),u=function(e){function A(){c(A);var t=N();l=t-a,a=t;var n=t-u;e.update.apply(e,[l,n]),e.draw.apply(e,[l,n])}var t=this,n=e.container,u,a,f,l,c;n.tabIndex="1",n.addEventListener("keyup",function(t){e.onKeyUp.apply(e,[t])},!1),n.addEventListener("keydown",function(t){e.onKeyDown.apply(e,[t])},!1),n.addEventListener("mouseover",function(t){e.onMouseOver.apply(e,[t])},!1),n.addEventListener("mouseout",function(t){e.onMouseOut.apply(e,[t])},!1),n.addEventListener("mousedown",function(t){e.onMouseDown.apply(e,[t])},!1),n.addEventListener("mouseup",function(t){e.onMouseUp.apply(e,[t])},!1),n.addEventListener("mousemove",function(t){e.onMouseMove.apply(e,[t])},!1),n.addEventListener("click",function(t){e.onClick.apply(e,[t])},!1),n.addEventListener("dblclick",function(t){e.onDoubleClick.apply(e,[t])},!1);var h=i.measure(n),p=i.calculatePosition(n),d=function(){var t=i.measure(n),r=i.calculatePosition(n);(t.width!=h.width||t.height!=h.height)&&e.onResize.apply(e,[t,r]),h=t,(r.x!=p.x||r.y!=p.y)&&e.onReposition.apply(e,[r,t]),p=r};window.addEventListener("resize",d,!1),window.addEventListener("scroll",d,!1);if(o){var v=new o(d);v.observe(document.body,{subtree:!0,childList:!0,characterData:!0,attribute:!0})}var m=function(){r.validateMethod("cancelFullScreen",document).apply(document)},g=function(){r.validateMethod("requestFullScreen",n).apply(n,[Element.ALLOW_KEYBOARD_INPUT])},y=!1,b=function(){y=!0,g(),n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.minWidth="100%",n.style.minHeight="100%",n.style.maxWidth="100%",n.style.maxHeight="100%"},w=function(){y=!1,n.removeAttribute("style"),m()},E=function(){y?w():b()},S=function(){return y},x=function(e){e<0&&(e=0);switch(e){case"auto":s?c=s:c=function(e){setTimeout(e,1e3/60)};break;case 0:c=function(e){};break;default:c=function(t){setTimeout(t,1e3/e)}}},T=function(){return 1/l},N;window.performance&&window.performance.now?N=function(){return window.performance.now()*.001}:window.performance&&window.performance.webkitNow?N=function(){return window.performance.webkitNow()*.001}:N=function(){return(new Date).getTime()*.001};var C=function(){return u},k=function(){return N()-u},L=function(){return l};Object.defineProperty(e,"setDesiredFPS",{value:x}),Object.defineProperty(e,"enterFullscreen",{value:b}),Object.defineProperty(e,"exitFullscreen",{value:w}),Object.defineProperty(e,"toggleFullscreen",{value:E}),Object.defineProperty(e,"isFullscreen",{get:S}),Object.defineProperty(e,"time",{get:N}),Object.defineProperty(e,"startTime",{get:C}),Object.defineProperty(e,"runTime",{get:k}),Object.defineProperty(e,"deltaTime",{get:L}),Object.defineProperty(e,"fps",{get:T}),Object.defineProperty(e,"position",{get:function(){return p}}),Object.defineProperty(e,"size",{get:function(){return h}}),x("auto"),u=N(),e.setup.apply(e),e.onReposition.apply(e,[p,h]),e.onResize.apply(e,[h,p]),a=u,f=0,l,A()};return u}),require(["App","happy/app/Runner"],function(e,t){var n=new e;n.container=document.body;var r=new t(n)}),define("main",function(){});